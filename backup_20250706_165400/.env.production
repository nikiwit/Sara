# .env.production - APURAG Production Configuration for HGX H100 G593-SD2
# ===============================================================================
# Optimized with Phase 1 performance improvements and production model management

# Environment Configuration
CUSTOMRAG_ENV=production

# Data and Storage Paths - absolute paths for production
CUSTOMRAG_DATA_PATH=/opt/apurag/data
CUSTOMRAG_VECTOR_PATH=/opt/apurag/vector_store

# HuggingFace Optimization Settings - CRITICAL for performance
# These significantly reduce startup time by enabling proper caching
HF_HUB_DISABLE_TELEMETRY=1
HF_HUB_DISABLE_PROGRESS_BARS=1
HF_HUB_DISABLE_SYMLINKS_WARNING=1
HF_HOME=/opt/apurag/model_cache
TRANSFORMERS_VERBOSITY=error
TOKENIZERS_PARALLELISM=false

# Model Settings - larger models for H100 GPU
# Production uses larger, more capable models
CUSTOMRAG_EMBEDDING_MODEL=BAAI/bge-large-en-v1.5
CUSTOMRAG_LLM_MODEL=qwen2.5:7b-instruct

# Text Chunking Settings - optimized for production
CUSTOMRAG_CHUNK_SIZE=800
CUSTOMRAG_CHUNK_OVERLAP=200

# Retrieval Settings - enhanced for production
CUSTOMRAG_RETRIEVER_K=8
CUSTOMRAG_SEARCH_TYPE=hybrid
CUSTOMRAG_KEYWORD_RATIO=0.4
CUSTOMRAG_FAQ_MATCH_WEIGHT=0.5

# Query Processing Settings - full expansion for production
CUSTOMRAG_QUERY_EXPANSION=True
CUSTOMRAG_EXPANSION_FACTOR=3

# Context Processing Settings - larger context for production
CUSTOMRAG_MAX_CONTEXT_SIZE=6000
CUSTOMRAG_CONTEXT_COMPRESSION=True

# Ollama API Configuration
CUSTOMRAG_OLLAMA_URL=http://localhost:11434

# Resource Settings - maximized for H100
CUSTOMRAG_MAX_THREADS=32
CUSTOMRAG_MAX_MEMORY=64G

# System Settings
CUSTOMRAG_FORCE_REINDEX=False
CUSTOMRAG_LOG_LEVEL=WARNING

# APU Specific Settings - production focused
FILTER_APU_ONLY=True
CUSTOMRAG_APU_KB_ANSWER_SIZE=3
CUSTOMRAG_APU_KB_EXACT_MATCH_BOOST=2.0

# Production Model Management - Conservative Approach
# ===================================================
# Conservative settings for production stability
CUSTOMRAG_MODEL_CHECK_INTERVAL_DAYS=30             # Check monthly
CUSTOMRAG_MODEL_WARNING_AGE_DAYS=90                # Warn after 3 months
CUSTOMRAG_MODEL_CRITICAL_AGE_DAYS=180              # Critical after 6 months
CUSTOMRAG_MODEL_AUTO_UPDATE_PROMPT=False           # No auto-prompts in production
CUSTOMRAG_MODEL_UPDATE_CHECK_ENABLED=True          # Enable checks but manual approval
CUSTOMRAG_MODEL_REQUIRE_APPROVAL=True              # Require explicit approval for updates

# Production-specific model settings
CUSTOMRAG_MODEL_CACHE_CLEANUP=True                 # Auto-cleanup old models
CUSTOMRAG_MODEL_BACKUP_ENABLED=True                # Enable backups
CUSTOMRAG_MODEL_MAX_BACKUPS=3                      # Keep 3 model backups
CUSTOMRAG_MODEL_NOTIFICATION_EMAIL=admin@example.com  # Optional: email notifications

# Production Security and Monitoring
# ==================================
# Add these if you have monitoring systems
# CUSTOMRAG_SENTRY_DSN=https://your-sentry-dsn
# CUSTOMRAG_PROMETHEUS_PORT=9090
# CUSTOMRAG_HEALTH_CHECK_PORT=8080