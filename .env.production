# .env.production - Sara Production Configuration for HGX H100 G593-SD2
# ===============================================================================
# Optimized with Phase 1 performance improvements and production model management

# Environment Configuration
SARA_ENV=production

# Data and Storage Paths - absolute paths for production
SARA_DATA_PATH=/opt/sara/data
SARA_VECTOR_PATH=/opt/sara/vector_store

# HuggingFace Optimization Settings - CRITICAL for performance
# These significantly reduce startup time by enabling proper caching
HF_HUB_DISABLE_TELEMETRY=1
HF_HUB_DISABLE_PROGRESS_BARS=1
HF_HUB_DISABLE_SYMLINKS_WARNING=1
HF_HOME=/opt/sara/model_cache
TRANSFORMERS_VERBOSITY=error
TOKENIZERS_PARALLELISM=false

# Model Settings - larger models for H100 GPU
# Production uses larger, more capable models
SARA_EMBEDDING_MODEL=BAAI/bge-large-en-v1.5
SARA_LLM_MODEL=qwen2.5:7b-instruct

# Reranker Model - Maximum performance for production
SARA_RERANKER_MODEL=BAAI/bge-reranker-large

# Text Chunking Settings - optimized for production
SARA_CHUNK_SIZE=800
SARA_CHUNK_OVERLAP=200

# Retrieval Settings - enhanced for production
SARA_RETRIEVER_K=8
SARA_SEARCH_TYPE=hybrid
SARA_KEYWORD_RATIO=0.4
SARA_FAQ_MATCH_WEIGHT=0.5

# Query Processing Settings - full expansion for production
SARA_QUERY_EXPANSION=True
SARA_EXPANSION_FACTOR=3

# Context Processing Settings - larger context for production
SARA_MAX_CONTEXT_SIZE=8000
SARA_CONTEXT_COMPRESSION=True

# Confidence and Query Processing Settings
SARA_CONFIDENCE_THRESHOLD=0.4

# Language Detection Settings
SARA_LANGUAGE_DETECTION=True
SARA_LANG_CONFIDENCE=0.8

# Support Contact Information (optional overrides)
SARA_SUPPORT_PHONE=+603-8996-1000
SARA_SUPPORT_EMAIL=info@apu.edu.my
SARA_SUPPORT_LOCATION=APU Student Services (Level 3, New Campus)

# Ambiguity Detection Settings
SARA_AMBIGUITY_DETECTION=True
SARA_AMBIGUITY_THRESHOLD=0.7

# Semantic Enhancement Settings - Production spaCy Configuration
# ==============================================================
# Enhanced semantic processing for production workloads
SARA_USE_ENHANCED_SEMANTICS=true
SARA_SEMANTIC_MODEL=en_core_web_sm
SARA_SEMANTIC_EXPANSION_LIMIT=8

# Ollama API Configuration
SARA_OLLAMA_URL=http://localhost:11434

# Resource Settings - maximized for H100
SARA_MAX_THREADS=32
SARA_MAX_MEMORY=64G

# System Settings
SARA_FORCE_REINDEX=False
SARA_LOG_LEVEL=WARNING

# APU Specific Settings - production focused
FILTER_APU_ONLY=True
SARA_APU_KB_ANSWER_SIZE=3
SARA_APU_KB_EXACT_MATCH_BOOST=2.0

# Production Model Management - Conservative Approach
# ===================================================
# Conservative settings for production stability
SARA_MODEL_CHECK_INTERVAL_DAYS=30             # Check monthly
SARA_MODEL_WARNING_AGE_DAYS=90                # Warn after 3 months
SARA_MODEL_CRITICAL_AGE_DAYS=180              # Critical after 6 months
SARA_MODEL_AUTO_UPDATE_PROMPT=False           # No auto-prompts in production
SARA_MODEL_UPDATE_CHECK_ENABLED=True          # Enable checks but manual approval
SARA_MODEL_REQUIRE_APPROVAL=True              # Require explicit approval for updates

# Production-specific model settings
SARA_MODEL_CACHE_CLEANUP=True                 # Auto-cleanup old models
SARA_MODEL_BACKUP_ENABLED=True                # Enable backups
SARA_MODEL_MAX_BACKUPS=3                      # Keep 3 model backups
SARA_MODEL_NOTIFICATION_EMAIL=admin@example.com  # Optional: email notifications

# Production Security and Monitoring
# ==================================
# Add these if you have monitoring systems
# SARA_SENTRY_DSN=https://your-sentry-dsn
# SARA_PROMETHEUS_PORT=9090
# SARA_HEALTH_CHECK_PORT=8080