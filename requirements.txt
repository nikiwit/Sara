# Production-grade requirements.txt with versions for stability
# Core dependencies with production-tested versions
torch==2.7.0
transformers==4.49.0  # Well-tested version, compatible with sentence-transformers
langchain==0.1.20
langchain-community==0.0.38
langchain-chroma==0.1.4
langchain-huggingface==0.0.3  # Proven stable version from testing
sentence-transformers==3.1.1  # Latest stable, well-tested with transformers 4.49.0
requests==2.32.3

# NLP libraries
nltk==3.9.1
spacy==3.7.2  # Modern NLP library for enhanced semantic processing
langdetect==1.0.9  # Language detection for multilingual support

# spaCy Installation Instructions:
# ===============================
# After installing requirements, run these commands to install spaCy language models:
# 
# 1. Install English model (required for semantic processing):
#    python -m spacy download en_core_web_sm
#
# 2. Verify installation:
#    python -c "import spacy; nlp = spacy.load('en_core_web_sm'); print('spaCy model loaded successfully')"
#
# 3. If you encounter permission issues, try:
#    python -m pip install --user https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.7.1/en_core_web_sm-3.7.1-py3-none-any.whl
#
# Note: The spaCy model (~50MB) will be downloaded to your Python environment and
# should be added to .gitignore to avoid committing large binary files.

# Vector store - production stable
chromadb==0.4.24

# Fast Hugging Face transfers
hf_xet==1.1.2

# Document processing - PDF (pinned for stability)
pypdf==5.5.0
pdfplumber==0.11.6

# Document processing - Word (stable versions)
docx2txt==0.9
python-docx==1.1.2

# Document processing - PowerPoint
python-pptx==1.0.2

# Document processing - EPUB
ebooklib==0.19
beautifulsoup4==4.13.4
lxml==5.4.0
html2text==2025.4.15

# Utilities - pinned for production stability
tqdm==4.67.1
python-dotenv==1.1.0
chardet==5.2.0
numpy==1.26.4
psutil==7.0.0

# Hugging Face ecosystem - production-tested versions
huggingface-hub==0.31.4
safetensors==0.5.3
tokenizers==0.21.1

# Production monitoring and logging
sentry-sdk>=1.40.0  # For error tracking
prometheus-client>=0.19.0  # For metrics

# Optional enhanced document processing
# Use specific versions to avoid surprises
unstructured==0.17.2
unstructured[epub]==0.17.2

# Development dependencies (remove in production)
pytest>=7.4.0  # Only for testing environments
pytest-cov>=4.1.0  # Only for testing environments

# Installation Instructions:
# =========================
# 
# 1. Create and activate virtual environment (recommended):
#    python -m venv venv
#    source venv/bin/activate  # Linux/Mac
#    # or: venv\Scripts\activate  # Windows
#
# 2. Install all requirements:
#    pip install -r requirements.txt
#
# 3. Install spaCy language model (REQUIRED):
#    python -m spacy download en_core_web_sm
#
# 4. Verify installation:
#    python -c "import spacy; nlp = spacy.load('en_core_web_sm'); print('âœ“ spaCy setup complete')"
#
# 5. Optional: Install Ollama for LLM functionality:
#    # Visit https://ollama.ai for installation instructions
#    ollama pull qwen2.5:3b-instruct  # Local development
#    ollama pull qwen2.5:7b-instruct  # Production
#
# Troubleshooting:
# ===============
# 
# If spaCy model download fails:
# - Check internet connection
# - Try direct download: pip install https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.7.1/en_core_web_sm-3.7.1-py3-none-any.whl
# - Ensure sufficient disk space (~50MB for model)
#
# If you get dependency conflicts:
# - Use a fresh virtual environment
# - Update pip: python -m pip install --upgrade pip
# - Install in order: pip install torch transformers sentence-transformers
#
# For Python 3.13 compatibility issues:
# - Downgrade to Python 3.11 or 3.12 if encountering build errors
# - Use conda for better dependency management: conda create -n sara python=3.12